<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width">  
    <title>ユニコエ用ライブラリ作成ツール</title>
    <script type="text/javascript" src="../lib/jquery/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="../lib/zlib/zlib.min.js"></script>
  </head>
  <body>
    <div class="display"></div>

    <form method="post" action="">
      <label for="voicevox">
        <input type="radio" id="voicevox" name="engine" value="VOICEVOX">
        VOICEVOX
      </label>
      <label for="coeiroink">
        <input type="radio" id="coeiroink" name="engine" value="COEIROINK">
        COEIROINK
      </label>


    </form>

    <script language="javascript" type="text/javascript">
      window.addEventListener('DOMContentLoaded', function(){
        var input_engines = document.querySelectorAll("input[name=engine]");

        for(var element of input_engines) {

          element.addEventListener('change',function(){
            if(this.checked){
              console.log(this.value);
              if(this.value=="VOICEVOX"){
                var port_number = "50021";
                var libtype = "voicevox";
              }else if(this.value=="COEIROINK"){
                var port_number = "50031";
                var libtype = "coeiroink";
              }
            }
            let url = `http://localhost:${port_number}/speakers`;

            $.getJSON(url, (speakers) => {
              for (let i=0; i<speakers.length; i++){
              console.log(`UUID=${speakers[i].speaker_uuid}, name=${speakers[i].name}`);
                for (let j=0; j<speakers[i].styles.length; j++){
                 console.log(`StyleName=${speakers[i].styles[j].name}, id=${speakers[i].styles[j].id}`);
                }
              }
            });

          });

        }
      });
    </script>

  </body>
</html>